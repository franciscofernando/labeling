function queryElement(e,t){if(e.window)return this[0]=window,this.length=1,this;for(var n=0;n<e.length;n++)this[n]=e[n];return this.length=n,this.selector=t||"",this}function miniQuery(e){if("function"==typeof e)document.addEventListener("DOMContentLoaded",e);else{if("string"==typeof e){var t=document.querySelectorAll(e),n=[].slice.call(t);return new queryElement(n,e)}if("undefined"!=typeof e.length&&"string"==typeof e.selector)return e;if("object"==typeof e)return new queryElement("undefined"!=typeof e.length?e.length?e.tagName?[e]:e:e:[e])}}queryElement.prototype.addClass=function(e){for(var t=0;t<this.length;t++){var n=this[t].className;new RegExp(e).test(n)||(this[t].className+=(""==n?"":" ")+e)}return this},queryElement.prototype.removeClass=function(e){for(var t=0;t<this.length;t++)this[t].className=this[t].className.replace(new RegExp(e+"\\s?"),"");return this},queryElement.prototype.toggleClass=function(e){for(var t=0;t<this.length;t++)miniQuery(this[t]).is("."+e)?miniQuery(this[t]).removeClass(e):miniQuery(this[t]).addClass(e);return this},queryElement.prototype.css=function(e,t){function n(e){return e.replace(/-[a-z]/,function(e){return e.toUpperCase().replace(/^\-/,"")})}if("string"==typeof e){if("undefined"==typeof t)return window.getComputedStyle(this[0],null).getPropertyValue(e);for(var r=0;r<this.length;r++)this[r].style[n(e)]=t;return this}if("object"==typeof e){for(var r in e)for(var i=0;i<this.length;i++)this[i].style[n(r)]=e[r];return this}},queryElement.prototype.each=function(e){for(var t=0;t<this.length;t++)e.call(this[t]);return this},queryElement.prototype.eq=function(e){return miniQuery(this[e]?this[e]:[])},queryElement.prototype.find=function(e){for(var t=[],n=0;n<this.length;n++){var r=this[n].querySelectorAll(e);if(r.length)for(var i=0;i<r.length;i++)t.push(r[i])}return miniQuery(t)},queryElement.prototype.children=function(e){for(var t=[],n=0;n<this[0].children.length;n++)this[0].children[n].matches(e)&&t.push(this[0].children[n]);return miniQuery(t)},queryElement.prototype.height=function(e){for(var t=this,n=0;n<t.length;n++)t[n].window&&(t[n]=window.document.documentElement);if(e){for(var n=0;n<t.length;n++){var r="string"==typeof e?e:e+"px";miniQuery(t[n]).css("height",r)}return this}return t[0].offsetHeight},queryElement.prototype.width=function(e){for(var t=this,n=0;n<t.length;n++)t[n].window&&(t[n]=window.document.documentElement);if(e){for(var n=0;n<t.length;n++){var r="string"==typeof e?e:e+"px";miniQuery(t[n]).css("width",r)}return this}return t[0].offsetWidth},queryElement.prototype.attr=function(e,t){if(t){for(var n=0;n<this.length;n++)this[n].setAttribute(e,t);return this}return this.length&&this[0].getAttribute?this[0].getAttribute(e)||"":""},queryElement.prototype.removeAttr=function(e){for(var t=0;t<this.length;t++)this[t].removeAttribute(e);return this},queryElement.prototype.text=function(e){if(e){for(var t=0;t<this.length;t++)this[t].textContent=e;return this}return this[0].textContent},queryElement.prototype.html=function(e){if("string"==typeof e){for(var t=0;t<this.length;t++)this[t].innerHTML=e;return this}return this[0].innerHTML},queryElement.prototype.contents=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].childNodes;if(n.length)for(var r=0;r<n.length;r++)e.push(n[r])}return miniQuery(e)},queryElement.prototype.filter=function(e){for(var t=[],n=0;n<this.length;n++)e.call(this[n])||delete this[n];for(var n in this)this[n].nodeName&&t.push(this[n]);return miniQuery(t)},queryElement.prototype.remove=function(){for(var e=0;e<this.length;e++){var t=this[e].parentNode;t.removeChild(this[e])}},queryElement.prototype.parent=function(e){for(var t=this[0];t.parentElement;){if(!e)return miniQuery(t.parentElement);if(t.parentElement.matches(e))return miniQuery(t.parentElement);t=t.parentElement}return miniQuery([])},queryElement.prototype.parents=function(e){for(var t=[],n=this[0];n.parentElement;)e?n.parentElement.matches(e)&&t.push(n.parentElement):t.push(n.parentElement),n=n.parentElement;return miniQuery(t)},queryElement.prototype.is=function(e){return this.length&&this[0].matches?this[0].matches(e):!1},queryElement.prototype.val=function(e){if("undefined"==typeof e)return this[0].value;for(var t=0;t<this.length;t++)this[t].value=e;return this},queryElement.prototype.append=function(e){for(var t=0;t<this.length;t++){var n=document.createElement("div");n.innerHTML=e;for(var r=0;r<n.childNodes.length;r++)this[t].appendChild(n.childNodes[r]),r--}return this},queryElement.prototype.prepend=function(e){for(var t=0;t<this.length;t++){var n=document.createElement("div");n.innerHTML=e;for(var r=this[t].children[0],i=0;i<n.childNodes.length;i++)this[t].insertBefore(n.childNodes[i],r),i--}return this},queryElement.prototype.before=function(e){for(var t=0;t<this.length;t++){var n=this[t].parentElement,r=document.createElement("div");r.innerHTML=e;for(var i=0;i<r.childNodes.length;i++)n.insertBefore(r.childNodes[i],this[t]),i--}return this},queryElement.prototype.after=function(e){for(var t=0;t<this.length;t++){var n=this[t].parentElement,r=document.createElement("div");r.innerHTML=e;for(var i=this[t].nextSibling,o=0;o<r.childNodes.length;o++)n.insertBefore(r.childNodes[o],i),o--}return this},queryElement.prototype.next=function(e){for(var t=this[0];t.nextElementSibling;){if(!e)return miniQuery(t.nextElementSibling);if(t.nextElementSibling.matches(e))return miniQuery(t.nextElementSibling);t=t.nextElementSibling}return miniQuery([])},queryElement.prototype.prev=function(e){for(var t=this[0];t.previousElementSibling;){if(!e)return miniQuery(t.previousElementSibling);if(t.previousElementSibling.matches(e))return miniQuery(t.previousElementSibling);t=t.previousElementSibling}return miniQuery([])},queryElement.prototype.last=function(){return miniQuery(this[this.length-1])},queryElement.prototype.first=function(){return miniQuery(this[0])},queryElement.prototype.index=function(){if(this.length){var e=miniQuery(this[0]).parent();if(!e.length)return-1;for(var t=0;t<e[0].children.length;t++)if(e[0].children[t]==this[0])return t;return-1}return-1},queryElement.prototype.animate=function(e,t,n){function r(e){return e.replace(/-[a-z]/,function(e){return e.toUpperCase().replace(/^\-/,"")})}function i(e,r,i,o,a){var l=.06,s=0,u=(o-i)/t/l,h=setInterval(function(){s++;var t=i+u*s;t=(0>u?t>o:o>t)?t:o,e.style[r]=t+a,t==o&&(n.call(miniQuery(e)),clearInterval(h))},1/l)}for(var t=t||300,n=n||function(){},o=0;o<this.length;o++)for(var a in e){var l=miniQuery(this[o]).css(a),s=parseInt(l),u=parseInt(e[a]),h=l.replace(/[0-9\.]/g,"");i(this[o],r(a),s,u,h)}return this},queryElement.prototype.defaultDisplay=function(){var e=this[0].localName;return"div"==e||"body"==e||"section"==e||"article"==e||"footer"==e||"header"==e||"nav"==e||"form"==e||"ul"==e?"block":"inline-block"},queryElement.prototype.fadeIn=function(e,t){if("function"==typeof e)var t=e,e=null;for(var n=0;n<this.length;n++){var r=miniQuery(this[n]);"none"==r.css("display")&&r.css({display:r[0].fadeDisplay?r[0].fadeDisplay:r.defaultDisplay(),opacity:0}).animate({opacity:1},e,t)}return this},queryElement.prototype.fadeOut=function(e,t){if("function"==typeof e)var t=e,e=null;for(var n=0;n<this.length;n++){var r=miniQuery(this[n]);"none"!=r.css("display")&&r.animate({opacity:0},e,function(){miniQuery(this)[0].fadeDisplay="none"!=miniQuery(this).css("display")?miniQuery(this).css("display"):!1,miniQuery(this).css("display","none"),t&&t()})}return this},queryElement.prototype.fadeToggle=function(e,t){for(var n=0;n<this.length;n++)"none"==miniQuery(this[n]).css("display")?miniQuery(this[n]).fadeIn(e,t):miniQuery(this[n]).fadeOut(e,t);return this},queryElement.prototype.slideDown=function(e,t){if("function"==typeof e)var t=e,e=null;for(var n=0;n<this.length;n++){var r=miniQuery(this[n]);if("none"==r.css("display")){r.css({display:r[0].fadeDisplay?r[0].fadeDisplay:r.defaultDisplay()});var i=r.css("height");r.css({height:"0px"}).animate({height:i},e,t)}}return this},queryElement.prototype.slideUp=function(e,t){if("function"==typeof e)var t=e,e=null;for(var n=0;n<this.length;n++){var r=miniQuery(this[n]);"none"!=r.css("display")&&r.animate({height:"0px"},e,function(){miniQuery(this)[0].fadeDisplay="none"!=miniQuery(this).css("display")?miniQuery(this).css("display"):!1,miniQuery(this).css({display:"none",height:""}),t&&t()})}},queryElement.prototype.slideToggle=function(e,t){for(var n=0;n<this.length;n++)"none"==miniQuery(this[n]).css("display")?miniQuery(this[n]).slideDown(e,t):miniQuery(this[n]).slideUp(e,t);return this},miniQuery.ajax=function(object){var ajax=new XMLHttpRequest,type=object.type?object.type.toUpperCase():"GET",url=object.url||"",data="",dataType=object.dataType||"";if("object"==typeof object.data){for(var i in object.data)data+=(""==data?"":"&")+i+"="+object.data[i];"GET"==type&&(url=url.replace(/\?$/,"")+"?"+data)}else data=object.data;return ajax.onreadystatechange=function(){if(4==ajax.readyState&&200==ajax.status){if(ajax.doneCallback)if("JSON"==dataType.toUpperCase())try{var resp=eval("("+ajax.responseText+")");ajax.doneCallback(resp),delete ajax.doneCallback}catch(e){ajax.errorCallback&&(ajax.errorCallback(ajax.responseText),delete ajax.errorCallback)}else ajax.doneCallback(response),delete ajax.doneCallback}else ajax.errorCallback&&(ajax.errorCallback(ajax.responseText),delete ajax.errorCallback)},ajax.done=function(e){return this.doneCallback=e,this},ajax.error=function(e){return this.errorCallback=e,this},ajax.open(type,url,!0),"GET"==type?ajax.send():(ajax.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),ajax.send(data)),ajax},miniQuery.get=function(e,t){miniQuery.ajax({url:e}).done(t)},function(){function e(e,t){queryElement.prototype[e]=function(n){if(n)for(var r=0;r<this.length;r++)this[r].addEventListener.call(this[r],e,function(e){n.call(this,e)},!1);else t.call(this);return this}}var t={afterprint:!1,animationend:!1,animationiteration:!1,animationstart:!1,beforeprint:!1,blur:function(){this[0].blur()},change:!1,click:function(){this[0].click()},contextmenu:!1,copy:!1,cut:!1,dblclick:!1,DOMNodeInserted:!1,drag:!1,dragend:!1,dragenter:!1,dragleave:!1,dragover:!1,dragstart:!1,drop:!1,focus:function(){this[0].focus()},fullscreenchange:!1,input:!1,keydown:!1,keypress:!1,keyup:!1,load:!1,mousedown:!1,mouseenter:!1,mouseleave:!1,mousemove:!1,mouseup:!1,resize:!1,scroll:!1,select:function(){this[0].select()},storage:!1,submit:!1,touchcancel:!1,touchend:!1,touchenter:!1,touchleave:!1,touchmove:!1,touchstart:!1};for(var n in t)e(n,t[n])}(),queryElement.prototype.trigger=function(e){for(var t=0;t<this.length;t++)this[t].dispatchEvent(new Event(e));return this},queryElement.prototype.on=function(e,t,n){if("function"==typeof t)for(var r=0;r<this.length;r++)this[r][e](t);else for(var r=0;r<this.length;r++)miniQuery(this[r]).find(t)[e](n),miniQuery(this[r]).DOMNodeInserted(function(r){r.srcElement.matches&&(r.srcElement.matches(t)&&miniQuery(r.srcElement)[e](n),miniQuery(r.srcElement).find(t).each(function(){miniQuery(this)[e](n)}))});return this};var $=window.jQuery?window.jQuery:miniQuery;Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(e,t){var n=this[e],r=n,i=function(){return r},o=function(i){return n=r,r=t.call(this,e,n,i)};delete this[e]&&Object.defineProperty(this,e,{get:i,set:o,enumerable:!0,configurable:!0})}}),queryElement.prototype.changeAll=function(e){function t(){o!=miniQuery(i).val()&&(e.call(i),o=miniQuery(i).val())}function n(){r=setInterval(function(){t()},20)}var r,i=this,o=miniQuery(this).val();return miniQuery(this)[0].onfocus=function(){n()},miniQuery(this)[0].onblur=function(){clearInterval(r)},miniQuery(this)[0].oninput=function(){t()},miniQuery(this)[0].onchange=function(){t()},this};var model={"export":function(e,t){var n={"export":!0,reload:!0,object:!0};n[e]||""==e?console.log('The word "'+e+'" is restricted.'):(model[e]=t,model[e].scope=[],model[e].object=miniQuery("*[env="+e+"]"))},reload:function(e){var obj=e.object;obj.find("*").each(function(){if(miniQuery(this).parent("*[env]").attr("env")==obj.attr("env")&&!miniQuery(this).children("*").length){if(miniQuery(this).is("input, textarea")){if(""!=miniQuery(this).attr("bind")){var text=miniQuery(this).attr("bind");miniQuery(this).removeAttr("bind")}}else var text=miniQuery(this).text();text=this.modelText?this.modelText:this.modelText=text;for(var regexp=/\{\{([^\}]+)\}\}/;regexp.test(text);){var attr=regexp.exec(text)[1],filterFunc=(attr.split(/\|/g)[1]||"").trim();if(attr=(attr.split(/\|/g)[0]||"").trim(),/^#/.test(attr))text=text.replace(regexp,"&lcub;&lcub;"+attr.replace(/^#/,"")+"&rcub;&rcub;");else if("string"==typeof eval("e."+attr)||"number"==typeof eval("e."+attr)){if(filterFunc){var param=(/\(([^\)]+)\)/.exec(filterFunc)||["",""])[1];if(param){filterFunc=filterFunc.split(/[\(\)]/g)[0];var val=filter[filterFunc]?filter[filterFunc].call('"'+eval("e."+attr)+'", '+param):eval("e."+attr)}else var val=filter[filterFunc]?filter[filterFunc].call(eval("e."+attr)):eval("e."+attr)}else var val=eval("e."+attr);text=text.replace(regexp,val)}else{var aux=!1;for(i=0;i<e.scope.length;i++)"undefined"!=typeof e.scope[i][attr]&&(aux=i);if(aux!==!1)return this.modelText=this.modelText.replace(new RegExp("\\{\\{"+attr+"\\}\\}"),"{{scope["+aux+"]."+attr+"}}"),model.reload(e),!0;text=text.replace(regexp,"")}}if(!miniQuery(this).children("*").length&&!miniQuery(this).contents().filter(function(){return 8==this.nodeType}).length)if(miniQuery(this).is("input, textarea")){var elem=this;!this.changeAllEvent&&this.modelText&&(elem.changeEvent=!0,miniQuery(this).changeAll(function(){elem.changeAllEvent=!0,elem.changeEvent=!1;var t=elem.modelText.replace(/\{/g,"").replace(/\}/g,"");e[t]=miniQuery(this).val()})),elem.changeEvent?miniQuery(this).val(text):elem.changeEvent=!0}else miniQuery(this).html(text)}})}},controller={"export":function(e,t){"export"!=e&&(controller[e]=function(e){var n=this,r=miniQuery(e).attr("env"),i={};i[r]=miniQuery(e);for(var o in this)this.watch(o,function(t,r,i){return setTimeout(function(){model.reload(n),miniQuery(e).find("*[env]").each(function(){var e=miniQuery(this).attr("env");model.reload(model[e])})},20),i});miniQuery(e).find("*[label]").each(function(){var t=miniQuery(this).attr("label");i[t]=miniQuery(e).find("*[label="+t+"]")}),env[r]=miniQuery(e);for(var o in i)env[r][o]=i[o];model.reload(this),t.call(this,i)})}},router={"export":function(e,t){router.routes[e]=t},change:function(e,t){if(t)for(i in router.routes){var n={},r=e,o=i,a=o.replace(/:([a-zA-Z0-9]+)/g,"[a-zA-Z0-9]+");if(a=new RegExp("^"+a+"$"),a.test(r)){for(r=r.split(/\//g),o=o.split(/\//g),j=0;j<o.length;j++)/^:/.test(o[j])&&(n[o[j].replace(/^:/,"")]=r[j]);router.routes[i](n)}}else window.location.hash="#"+e},show:function(e,t){var n=router.options.initUrl+router.scenes[e].url;for(i in t)n=n.replace(":"+i,t[i]);n=n.replace(/:[a-zA-Z0-9]+/g,""),router.hidden(e),miniQuery.get(n,function(t){router.scenes[e].obj.after(t)})},hidden:function(e){var t=!1;router.scenes[e].obj.parent().contents().each(function(){t?/:end$/.test((this.nodeValue||"").replace(/\s+$/,""))?t=!1:miniQuery(this).remove():t=!1,this==router.scenes[e].obj[0]&&(t=t?!1:!0)})},routes:{},scenes:{},options:{initUrl:"",history:{}}},cookie={get:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},set:function(e,t,n){var r=new Date;if(!n)var n=360;r.setTime(r.getTime()+24*n*60*60*1e3);var i="expires="+r.toUTCString();return document.cookie=e+"="+t+"; "+i,t}},env={},filter={},global={url:window.location.url,browser:"",divice:"",lang:"",first:!0};window.onhashchange=function(){router.change(window.location.hash.replace(/^#/,""),!0)},miniQuery("*").each(function(){var e=miniQuery(this);miniQuery(this).contents().filter(function(){return 8==this.nodeType}).each(function(t,n){var r=miniQuery(this),n=this;if(/^\s+?include\s/.test(n.nodeValue))miniQuery.get(n.nodeValue.replace(/^\s+/g,"").replace(/\s+$/g,"").split(" ")[1],function(t){if(miniQuery(r).after(t).remove(),miniQuery(e).parent("*[env]").length){var n=miniQuery(e).parent("*[env]").attr("env");model.reload(model[n])}});else if(/^\s+?router\s[a-zA-Z0-9]+\s.+/.test(n.nodeValue)){var i=n.nodeValue.replace(/^\s+/g,"").replace(/\s+$/g,"").split(/\s/g);router.scenes[i[1]]={url:i[2],obj:miniQuery(this)},n.nodeValue=i[1]+":start",miniQuery(this).after("<!--"+i[1]+":end-->")}})}),miniQuery(function(){router.options.initUrl=window.location.origin+window.location.pathname.replace(/[a-zA-Z0-9\_\-\.]+$/,""),window.onhashchange(),miniQuery("*[env]").each(function(){var e=miniQuery(this).attr("env");model[e]?model[e]:model["export"](e,{}),controller[e]?controller[e]:controller["export"](e,function(){}),miniQuery(this).parents("*[env]").length&&miniQuery(this).parents("*[env]").each(function(){var t=miniQuery(this).attr("env");model[e].scope[model[e].scope.length]=model[t]}),controller[e].call(model[e],miniQuery(this))})});